(function(){"use strict";var e={42:function(e,t,l){var a=l(5130),o=l(4203),i=(l(4188),l(6768)),r=l(4232);const d={class:"common-layout"},n={class:"card-header"},s={style:{"margin-top":"18px","margin-bottom":"18px","margin-left":"10px"}},u=(0,i.Lk)("div",{class:"card-header"},[(0,i.Lk)("span",null,"Trade")],-1),c={class:"dialog-footer"},p={class:"dialog-footer"};function b(e,t,l,a,o,b){const m=(0,i.g2)("el-menu-item"),h=(0,i.g2)("el-menu"),g=(0,i.g2)("el-header"),f=(0,i.g2)("el-text"),k=(0,i.g2)("el-col"),F=(0,i.g2)("el-row"),y=(0,i.g2)("el-option"),w=(0,i.g2)("el-select"),_=(0,i.g2)("el-table-column"),v=(0,i.g2)("el-table"),L=(0,i.g2)("el-card"),T=(0,i.g2)("el-input"),x=(0,i.g2)("el-form-item"),O=(0,i.g2)("el-button"),V=(0,i.g2)("el-form"),C=(0,i.g2)("el-tab-pane"),A=(0,i.g2)("el-tabs"),S=(0,i.g2)("el-main"),N=(0,i.g2)("el-container"),U=(0,i.g2)("el-dialog");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",d,[(0,i.bF)(N,null,{default:(0,i.k6)((()=>[(0,i.bF)(g,{style:{padding:"0px"}},{default:(0,i.k6)((()=>[(0,i.bF)(h,{class:"menu-wrapper",mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b","menu-align-right":!0},{default:(0,i.k6)((()=>[(0,i.bF)(m,null,{default:(0,i.k6)((()=>[1==o.isLogin?((0,i.uX)(),(0,i.CE)("p",{key:0,onClick:t[0]||(t[0]=e=>o.withdrawFormVisible=!0)},"Withdraw")):(0,i.Q3)("",!0)])),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)((()=>[0==o.isLogin?((0,i.uX)(),(0,i.CE)("p",{key:0,onClick:t[1]||(t[1]=e=>o.loginFormVisible=!0)},"login")):((0,i.uX)(),(0,i.CE)("p",{key:1,onClick:t[2]||(t[2]=(...e)=>b.logOut&&b.logOut(...e))},"LogOut"))])),_:1})])),_:1})])),_:1}),(0,i.bF)(S,null,{default:(0,i.k6)((()=>[0==o.isLogin?((0,i.uX)(),(0,i.Wv)(F,{key:0},{default:(0,i.k6)((()=>[(0,i.bF)(k,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(f,{class:"mx-1",type:"danger"},{default:(0,i.k6)((()=>[(0,i.eW)("Please log in before using it. The api-key is saved in the local browser and is safe.")])),_:1})])),_:1})])),_:1})):(0,i.Q3)("",!0),(0,i.bF)(F,null,{default:(0,i.k6)((()=>[(0,i.bF)(k,{span:6},{default:(0,i.k6)((()=>[(0,i.bF)(L,{style:{"max-width":"460px","min-height":"315px"},class:"no-border"},{header:(0,i.k6)((()=>[(0,i.Lk)("div",n,[(0,i.bF)(w,{modelValue:o.pair,"onUpdate:modelValue":t[3]||(t[3]=e=>o.pair=e),placeholder:"Select",size:"small",style:{width:"240px"},onChange:t[4]||(t[4]=e=>b.selectPair())},{default:(0,i.k6)((()=>[(0,i.bF)(y,{label:"ATN-USD",value:"ATN-USD"}),(0,i.bF)(y,{label:"NTN-USD",value:"NTN-USD"})])),_:1},8,["modelValue"])])])),default:(0,i.k6)((()=>[(0,i.bF)(v,{data:o.askList,style:{width:"100%",color:"red"},onRowClick:b.setPrice},{default:(0,i.k6)((()=>[(0,i.bF)(_,{prop:"price",label:"Price"}),(0,i.bF)(_,{prop:"amount",label:"Amount",width:"180",align:"right"})])),_:1},8,["data","onRowClick"]),(0,i.Lk)("div",s,[(0,i.bF)(f,{style:{"font-size":"18px"}},{default:(0,i.k6)((()=>[(0,i.eW)((0,r.v_)(o.price),1)])),_:1})]),(0,i.bF)(v,{data:o.bidList,style:{width:"100%",color:"green"},"show-header":!1,onRowClick:b.setPrice},{default:(0,i.k6)((()=>[(0,i.bF)(_,{prop:"price",label:"Price"}),(0,i.bF)(_,{prop:"amount",label:"Amount",width:"180",align:"right"})])),_:1},8,["data","onRowClick"])])),_:1})])),_:1}),(0,i.bF)(k,{span:18},{default:(0,i.k6)((()=>[(0,i.bF)(L,null,{header:(0,i.k6)((()=>[u])),default:(0,i.k6)((()=>[(0,i.bF)(F,null,{default:(0,i.k6)((()=>[(0,i.bF)(k,{span:12},{default:(0,i.k6)((()=>[(0,i.bF)(L,{style:{"max-width":"480px"}},{default:(0,i.k6)((()=>[(0,i.bF)(V,{model:o.buyForm,"label-width":"auto",style:{"max-width":"600px"}},{default:(0,i.k6)((()=>[(0,i.bF)(f,{style:{"text-align":"right","margin-left":"280px"}},{default:(0,i.k6)((()=>[(0,i.eW)("balance:"+(0,r.v_)(o.balanceData.USD.available)+" USD",1)])),_:1}),(0,i.bF)(x,{label:"Price"},{default:(0,i.k6)((()=>[(0,i.bF)(T,{modelValue:o.buyForm.price,"onUpdate:modelValue":t[5]||(t[5]=e=>o.buyForm.price=e)},{append:(0,i.k6)((()=>[(0,i.eW)("USD")])),_:1},8,["modelValue"])])),_:1}),(0,i.bF)(x,{label:"Amount"},{default:(0,i.k6)((()=>[(0,i.bF)(T,{modelValue:o.buyForm.amount,"onUpdate:modelValue":t[6]||(t[6]=e=>o.buyForm.amount=e)},{append:(0,i.k6)((()=>[(0,i.eW)((0,r.v_)(this.symbol),1)])),_:1},8,["modelValue"])])),_:1}),(0,i.bF)(x,null,{default:(0,i.k6)((()=>[(0,i.bF)(O,{type:"primary",style:{width:"100%"},onClick:b.buyOrder},{default:(0,i.k6)((()=>[(0,i.eW)("Buy")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1}),(0,i.bF)(k,{span:12},{default:(0,i.k6)((()=>[(0,i.bF)(L,{style:{"max-width":"480px"}},{default:(0,i.k6)((()=>[(0,i.bF)(V,{model:o.sellForm,"label-width":"auto",style:{"max-width":"600px"}},{default:(0,i.k6)((()=>[(0,i.bF)(f,{style:{"text-align":"right","margin-left":"185px"}},{default:(0,i.k6)((()=>[(0,i.eW)("balance:"+(0,r.v_)(o.symbolBalance.available)+" "+(0,r.v_)(this.symbol),1)])),_:1}),(0,i.bF)(x,{label:"Price"},{default:(0,i.k6)((()=>[(0,i.bF)(T,{modelValue:o.sellForm.price,"onUpdate:modelValue":t[7]||(t[7]=e=>o.sellForm.price=e)},{append:(0,i.k6)((()=>[(0,i.eW)("USD")])),_:1},8,["modelValue"])])),_:1}),(0,i.bF)(x,{label:"Amount"},{default:(0,i.k6)((()=>[(0,i.bF)(T,{modelValue:o.sellForm.amount,"onUpdate:modelValue":t[8]||(t[8]=e=>o.sellForm.amount=e)},{append:(0,i.k6)((()=>[(0,i.eW)((0,r.v_)(this.symbol),1)])),_:1},8,["modelValue"])])),_:1}),(0,i.bF)(x,null,{default:(0,i.k6)((()=>[(0,i.bF)(O,{type:"warning",style:{width:"100%"},onClick:b.sellOrder},{default:(0,i.k6)((()=>[(0,i.eW)("Sell")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1}),(0,i.bF)(F,{style:{"margin-top":"18px"}},{default:(0,i.k6)((()=>[(0,i.bF)(k,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(A,{modelValue:o.activeName,"onUpdate:modelValue":t[9]||(t[9]=e=>o.activeName=e),class:"demo-tabs",onTabClick:b.handleClick},{default:(0,i.k6)((()=>[(0,i.bF)(C,{label:"Order",name:"orderTable"},{default:(0,i.k6)((()=>[(0,i.bF)(v,{data:o.orderList,stripe:"",style:{width:"100%"}},{default:(0,i.k6)((()=>[(0,i.bF)(_,{prop:"order_id",label:"Order ID",width:"80"}),(0,i.bF)(_,{prop:"timestamp",label:"Trade Time","show-overflow-tooltip":!0}),(0,i.bF)(_,{prop:"pair",label:"Pair"}),(0,i.bF)(_,{prop:"type",label:"Type"}),(0,i.bF)(_,{prop:"side",label:"Side"}),(0,i.bF)(_,{prop:"amount",label:"Amount"}),(0,i.bF)(_,{prop:"price",label:"Price"}),(0,i.bF)(_,{prop:"status",label:"Status"}),(0,i.bF)(_,{fixed:"right",label:"Operations",width:"120"},{default:(0,i.k6)((e=>["open"==e.row.status?((0,i.uX)(),(0,i.Wv)(O,{key:0,link:"",type:"primary",size:"small",onClick:t=>b.cancelOrder(e.row)},{default:(0,i.k6)((()=>[(0,i.eW)("Cancel")])),_:2},1032,["onClick"])):(0,i.Q3)("",!0)])),_:1})])),_:1},8,["data"])])),_:1}),(0,i.bF)(C,{label:"Trade",name:"tradeTable"},{default:(0,i.k6)((()=>[(0,i.bF)(v,{data:o.tradeList,stripe:"",style:{width:"100%"}},{default:(0,i.k6)((()=>[(0,i.bF)(_,{prop:"trade_id",label:"Trade ID",width:"180"}),(0,i.bF)(_,{prop:"order_id",label:"Order ID",width:"180"}),(0,i.bF)(_,{prop:"timestamp",label:"Trade Time","show-overflow-tooltip":!0}),(0,i.bF)(_,{prop:"pair",label:"Pair"}),(0,i.bF)(_,{prop:"side",label:"Side"}),(0,i.bF)(_,{prop:"amount",label:"Amount"}),(0,i.bF)(_,{prop:"price",label:"Price"})])),_:1},8,["data"])])),_:1})])),_:1},8,["modelValue","onTabClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})]),(0,i.bF)(U,{modelValue:o.loginFormVisible,"onUpdate:modelValue":t[13]||(t[13]=e=>o.loginFormVisible=e),title:"Login",width:"500"},{footer:(0,i.k6)((()=>[(0,i.Lk)("div",c,[(0,i.bF)(O,{onClick:t[11]||(t[11]=e=>o.loginFormVisible=!1)},{default:(0,i.k6)((()=>[(0,i.eW)("Cancel")])),_:1}),(0,i.bF)(O,{type:"primary",onClick:t[12]||(t[12]=e=>b.apiKeyLogin())},{default:(0,i.k6)((()=>[(0,i.eW)(" Confirm ")])),_:1})])])),default:(0,i.k6)((()=>[(0,i.bF)(V,{model:o.loginForm},{default:(0,i.k6)((()=>[(0,i.bF)(x,{label:"Api Key","label-width":e.formLabelWidth},{default:(0,i.k6)((()=>[(0,i.bF)(T,{modelValue:o.loginForm.api_key,"onUpdate:modelValue":t[10]||(t[10]=e=>o.loginForm.api_key=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,i.bF)(U,{modelValue:o.withdrawFormVisible,"onUpdate:modelValue":t[18]||(t[18]=e=>o.withdrawFormVisible=e),title:"Withdraw",width:"500"},{footer:(0,i.k6)((()=>[(0,i.Lk)("div",p,[(0,i.bF)(O,{onClick:t[16]||(t[16]=e=>o.withdrawFormVisible=!1)},{default:(0,i.k6)((()=>[(0,i.eW)("Cancel")])),_:1}),(0,i.bF)(O,{type:"primary",onClick:t[17]||(t[17]=e=>b.withdrawConfirm())},{default:(0,i.k6)((()=>[(0,i.eW)(" Confirm ")])),_:1})])])),default:(0,i.k6)((()=>[(0,i.bF)(V,{model:o.withdrawForm},{default:(0,i.k6)((()=>[(0,i.bF)(x,{label:"Symbol"},{default:(0,i.k6)((()=>[(0,i.bF)(w,{modelValue:o.withdrawForm.symbol,"onUpdate:modelValue":t[14]||(t[14]=e=>o.withdrawForm.symbol=e),placeholder:"please select withdraw symbol"},{default:(0,i.k6)((()=>[(0,i.bF)(y,{label:"ATN",value:"ATN"}),(0,i.bF)(y,{label:"NTN",value:"NTN"})])),_:1},8,["modelValue"])])),_:1}),(0,i.bF)(x,{label:"Amount","label-width":e.formLabelWidth},{default:(0,i.k6)((()=>[(0,i.bF)(T,{modelValue:o.withdrawForm.amount,"onUpdate:modelValue":t[15]||(t[15]=e=>o.withdrawForm.amount=e),autocomplete:"off",placeholder:"Please input withdraw Amount"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}var m=l(8355),h=l(3851),g={name:"App",components:{},data(){return{withdrawFormVisible:!1,withdrawForm:{},isLogin:!1,loginForm:{api_key:""},loginFormVisible:!1,pair:"NTN-USD",quoteData:{},tradeData:{},sellForm:{side:"ask"},buyForm:{side:"bid"},balanceData:{ATN:{available:0},NTN:{available:0},USD:{available:0}},tradeList:[],orderList:[],askList:[],bidList:[],depthTime:"",price:0,timer:null,activeName:"orderTable",symbol:"NTN",symbolBalance:{}}},mounted(){console.log(window.localStorage.getItem("api_key")),window.localStorage.getItem("api_key")&&(this.isLogin=!0,this.getOrderBook(),this.getBalance(),this.getTradeList(),this.getOrderList()),this.timer=setInterval((()=>{this.getOrderBook()}),1e4)},beforeUnmount(){clearInterval(this.timer),this.timer=null},created(){console.log(window.localStorage.getItem("api_key")),window.localStorage.getItem("api_key")&&(this.isLogin=!0,this.getOrderBook(),this.getBalance(),this.getTradeList(),this.getOrderList())},methods:{selectPair(){this.refresh(),"ATN-USD"==this.pair?this.symbol="ATN":"NTN-USD"==this.pair&&(this.symbol="NTN")},refresh(){this.getOrderBook(),this.getBalance()},withdrawConfirm(){m.A.post("https://cax.piccadilly.autonity.org/api/withdraws",this.withdrawForm).then((e=>{console.log("withdraw",e.data),e.data&&(0,h.df)({title:"Withdraw Accepted",message:"txid:"+e.data.txid}),location.reload()})).catch((e=>{(0,h.df)({title:"Withdraw Forbidden",message:e.message}),console.error(e)}))},logOut(){window.localStorage.setItem("api_key",""),location.reload()},apiKeyLogin(){window.localStorage.setItem("api_key",this.loginForm.api_key),this.loginFormVisible=!1,location.reload()},handleClick(e){console.log(e.props.name),"tradeTable"==e.props.name?this.getTradeList():"orderTable"==e.props.name&&this.getOrderList()},setPrice(e){this.sellForm.price=e.price,this.buyForm.price=e.price},getOrderBook(){m.A.get(`https://cax.piccadilly.autonity.org/api/orderbooks/${this.pair}/depth`).then((e=>{this.askList=e.data.asks.slice(0,8).sort(((e,t)=>t.price-e.price)),this.bidList=e.data.bids.slice(0,8),this.price=this.bidList[0].price,this.depthTime=e.data.timestamp,console.log(this.askList)})).catch((e=>{console.error(e)}))},getBalance(){m.A.get("https://cax.piccadilly.autonity.org/api/balances").then((e=>{const t=JSON.parse(JSON.stringify(e.data));t.forEach((e=>{this.balanceData[e.symbol]=e})),this.symbolBalance=this.balanceData[this.symbol],console.log(this.balanceData)})).catch((e=>{401==e.response.status&&((0,h.df)({title:"Unauthorized",message:"Unknown API Key.Please log in again and enter the correct apikey"}),this.logOut()),console.error("1111",e)}))},getTradeList(){m.A.get("https://cax.piccadilly.autonity.org/api/trades").then((e=>{this.tradeList=e.data.sort(((e,t)=>t.order_id-e.order_id)).slice(0,10),console.log(this.tradeList)})).catch((e=>{console.error(e)}))},getOrderList(){m.A.get("https://cax.piccadilly.autonity.org/api/orders").then((e=>{this.orderList=e.data.sort(((e,t)=>t.order_id-e.order_id)).slice(0,10),console.log(this.orderList)})).catch((e=>{console.error(e)}))},buyOrder(){this.buyForm.pair=this.pair,m.A.post("https://cax.piccadilly.autonity.org/api/orders",this.buyForm).then((e=>{console.log("buy",e.data),this.getTradeList(),this.getOrderList(),this.getBalance()})).catch((e=>{console.error(e)}))},sellOrder(){this.sellForm.pair=this.pair,console.log(this.sellForm),m.A.post("https://cax.piccadilly.autonity.org/api/orders",this.sellForm).then((e=>{console.log("sell",e.data),this.getTradeList(),this.getOrderList(),this.getBalance()})).catch((e=>{console.error(e)}))},cancelOrder(e){console.log(e),m.A.delete("https://cax.piccadilly.autonity.org/api/orders/"+e.order_id).then((e=>{console.log("cancel",e.data),this.getTradeList(),this.getOrderList(),this.getBalance()})).catch((e=>{console.error(e)}))},withdrawOrder(){}}},f=l(1241);const k=(0,f.A)(g,[["render",b]]);var F=k;m.A.defaults.baseURL="https://cax.piccadilly.autonity.org/",m.A.interceptors.request.use((e=>(e.headers["API-Key"]=window.localStorage.getItem("api_key"),e)));const y=(0,a.Ef)(F),w=(e,t)=>{let l;return(...a)=>{l&&clearTimeout(l),l=setTimeout((()=>{e(...a)}),t)}},_=window.ResizeObserver;window.ResizeObserver=class extends _{constructor(e){e=w(e,200),super(e)}},y.use(m.A),y.use(o.A),y.mount("#app")}},t={};function l(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,l),i.exports}l.m=e,function(){var e=[];l.O=function(t,a,o,i){if(!a){var r=1/0;for(u=0;u<e.length;u++){a=e[u][0],o=e[u][1],i=e[u][2];for(var d=!0,n=0;n<a.length;n++)(!1&i||r>=i)&&Object.keys(l.O).every((function(e){return l.O[e](a[n])}))?a.splice(n--,1):(d=!1,i<r&&(r=i));if(d){e.splice(u--,1);var s=o();void 0!==s&&(t=s)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[a,o,i]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};l.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,i,r=a[0],d=a[1],n=a[2],s=0;if(r.some((function(t){return 0!==e[t]}))){for(o in d)l.o(d,o)&&(l.m[o]=d[o]);if(n)var u=n(l)}for(t&&t(a);s<r.length;s++)i=r[s],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return l.O(u)},a=self["webpackChunkautonity_cax_vue"]=self["webpackChunkautonity_cax_vue"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=l.O(void 0,[504],(function(){return l(42)}));a=l.O(a)})();
//# sourceMappingURL=app.8701018e.js.map